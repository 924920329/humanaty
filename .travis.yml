os: osx
language: generic
before_script:
- brew update
- brew install --HEAD usbmuxd
- brew unlink usbmuxd
- brew link usbmuxd
- brew install --HEAD libimobiledevice
- brew install ideviceinstaller
- brew install ios-deploy
- git clone https://github.com/flutter/flutter.git -b beta --depth 1
script:
- flutter/bin/flutter build ios --debug --no-codesign
cache:
  directories:
  - "$HOME/.pub-cache"
before_deploy:
- pushd build/ios/iphoneos
- mkdir Payload
- cd Payload
- ln -s ../Runner.app
- cd ..
- zip -r app.ipa Payload
- popd
deploy:
  provider: releases
  api_key:
    secure: FCXDexawW0l8kT1dW+pncHutiOsH8uNcUAGT+pBp3QGK9Nu1qIK6nSceRyfXsLL5pWsVmIuLaH63UNp2HGjsqHx6qb1UfBccKpNfSChxVox/5yqwWjFCTpvKjl3H7yD9Ixe03YYzIACdZh7wpp41B5HJGDKCTDGLb1ShUXF5PlTXKlMoyXOaxhX66xjDZohQ/HD7nY4atlKaLKeO705fgBrf5gF/p5q+4lboJO/8AJFKbh3mPTRh4wW35FEHfrGIltbPx6UTL97NZqpRsj+arVUyi+KpN9lUUnxwnPewuPCCTf6TJoA4bZMvOG0mO4Zrqpd8PMJkGFgwPmkHrxXm0fiB+4DD98UQUPRFxNCTQ/qIn3HWpUp9ePiSb8euiTBLetj9tgtU1Aa+82cBi+4NePPmpos/CNxTRswip6bf1L+8pWYKpmB07+FQRtqCJlHymkuMiqvk5GNNs2I6y7frPe5XB5H7ucYqNuT1+RFJ6B+RFqgOZYwIHs0I/otP5KJZU7Zl/TUvKC469FwfxLxccTV2usj6Jrj4PK6wVdITc3IoB4QzfFli2Z7/Gu4lDJlbWeXC987sNarauYOKJ/ZIOlhCZS6PkmGEyxUlwTzvPIOZGis9dVWIz2GbCwKdLnDdLoOtURo9tat6m7D8m5SRejTadMHWVRg/7ZuwfzQFbJk=
  file: build/ios/iphoneos/app.ipa
  on:
    repo: bspencer30/humanaty
